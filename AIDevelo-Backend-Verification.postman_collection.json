{
  "info": {
    "name": "AIDevelo Backend Verification",
    "description": "Collection for testing Voice Agent and Privacy Control endpoints",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "Server Health",
      "item": [
        {
          "name": "GET /health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/health",
              "host": ["{{API_BASE_URL}}"],
              "path": ["health"]
            },
            "description": "Check if API server is running"
          }
        },
        {
          "name": "GET /health/ready",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/health/ready",
              "host": ["{{API_BASE_URL}}"],
              "path": ["health/ready"]
            },
            "description": "Check if database is ready"
          }
        }
      ]
    },
    {
      "name": "Voice Agent Endpoints",
      "item": [
        {
          "name": "POST /api/voice-agent/elevenlabs-stream-token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerId\": \"customer-{{$timestamp}}\",\n  \"agentId\": \"agent-test-001\",\n  \"voiceId\": \"pNInz6obpgDQGcFmaJgB\",\n  \"duration\": 3600\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/voice-agent/elevenlabs-stream-token",
              "host": ["{{API_BASE_URL}}"],
              "path": ["voice-agent", "elevenlabs-stream-token"]
            },
            "description": "Get JWT token for ElevenLabs WebSocket connection. Returns temporary token with limited scope (API key never exposed)."
          }
        },
        {
          "name": "POST /api/voice-agent/query",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerId\": \"customer-{{$timestamp}}\",\n  \"agentId\": \"agent-test-001\",\n  \"query\": \"What are your hours of operation?\",\n  \"sessionId\": \"session-{{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/voice-agent/query",
              "host": ["{{API_BASE_URL}}"],
              "path": ["voice-agent", "query"]
            },
            "description": "Text query endpoint for synchronous responses"
          }
        },
        {
          "name": "WebSocket /api/voice-agent/elevenlabs-stream",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/voice-agent/elevenlabs-stream",
              "host": ["{{API_BASE_URL}}"],
              "path": ["voice-agent", "elevenlabs-stream"]
            },
            "description": "WebSocket endpoint for real-time voice streaming (use ws:// protocol in client). Requires token from elevenlabs-stream-token endpoint."
          }
        }
      ]
    },
    {
      "name": "Privacy Control Endpoints",
      "item": [
        {
          "name": "POST /api/privacy/export-data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"user-123\",\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/privacy/export-data",
              "host": ["{{API_BASE_URL}}"],
              "path": ["privacy", "export-data"]
            },
            "description": "Export all user data in JSON format (GDPR/nDSG compliance). Includes:\n- User profile\n- All agents\n- Call logs\n- Audit logs\n- RAG documents"
          }
        },
        {
          "name": "GET /api/privacy/audit-log",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{API_BASE_URL}}/privacy/audit-log?userId=user-123&limit=50",
              "host": ["{{API_BASE_URL}}"],
              "path": ["privacy", "audit-log"],
              "query": [
                {
                  "key": "userId",
                  "value": "user-123"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "description": "Retrieve audit log entries for a user. Shows all data access and modifications."
          }
        },
        {
          "name": "POST /api/privacy/delete-data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"user-123\",\n  \"email\": \"user@example.com\",\n  \"confirmDeletion\": true\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/privacy/delete-data",
              "host": ["{{API_BASE_URL}}"],
              "path": ["privacy", "delete-data"]
            },
            "description": "⚠️ DESTRUCTIVE: Delete all user data (right to be forgotten). Cannot be undone. Requires:\n- Exact userId and email match\n- confirmDeletion flag set to true\n\nDeletes:\n- User account\n- All agents\n- All call logs\n- All documents\n- Anonymizes audit logs for compliance"
          }
        }
      ]
    },
    {
      "name": "Error Scenarios",
      "item": [
        {
          "name": "Missing Required Parameters",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerId\": \"customer-123\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/voice-agent/elevenlabs-stream-token",
              "host": ["{{API_BASE_URL}}"],
              "path": ["voice-agent", "elevenlabs-stream-token"]
            },
            "description": "Expected to fail with 400 - missing agentId"
          }
        },
        {
          "name": "Missing Deletion Confirmation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"user-123\",\n  \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{API_BASE_URL}}/privacy/delete-data",
              "host": ["{{API_BASE_URL}}"],
              "path": ["privacy", "delete-data"]
            },
            "description": "Expected to fail with 400 - missing confirmDeletion flag"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "API_BASE_URL",
      "value": "http://localhost:5000/api",
      "type": "string"
    },
    {
      "key": "API_BASE_URL_PROD",
      "value": "https://aidevelo.ai/api",
      "type": "string"
    }
  ]
}
