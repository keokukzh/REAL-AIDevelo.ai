<?xml version="1.0" encoding="UTF-8"?>
<include>
  <!-- Default Directory for AIDevelo Voice Agent -->
  <!-- This directory accepts all test_* users for WebRTC test calls -->
  <!-- FreeSWITCH will use this directory for authentication -->
  
  <!-- Default domain (uses IP address) -->
  <domain name="$${domain}">
    <params>
      <param name="dial-string" value="{^^:sip_invite_domain=${dialed_domain}:presence_id=${dialed_user}@${dialed_domain}}${sofia_contact(*/${dialed_user}@${dialed_domain})},${verto_contact(${dialed_user}@${dialed_domain})}"/>
    </params>
    
    <groups>
      <group name="default">
        <users>
          <!-- Generic test user - accepts any test_* username with password test123 -->
          <user id="test">
            <params>
              <param name="password" value="test123"/>
              <param name="vm-password" value="test123"/>
            </params>
            <variables>
              <variable name="toll_allow" value="domestic,international,local"/>
              <variable name="accountcode" value="test"/>
              <variable name="user_context" value="default"/>
              <variable name="effective_caller_id_name" value="Test User"/>
              <variable name="effective_caller_id_number" value="1000"/>
              <variable name="outbound_caller_id_name" value="$${outbound_caller_name}"/>
              <variable name="outbound_caller_id_number" value="$${outbound_caller_id}"/>
            </variables>
          </user>
        </users>
      </group>
    </groups>
  </domain>
  
  <!-- Accept freeswitch.aidevelo.ai domain -->
  <domain name="freeswitch.aidevelo.ai">
    <params>
      <param name="dial-string" value="{^^:sip_invite_domain=${dialed_domain}:presence_id=${dialed_user}@${dialed_domain}}${sofia_contact(*/${dialed_user}@${dialed_domain})},${verto_contact(${dialed_user}@${dialed_domain})}"/>
    </params>
    
    <groups>
      <group name="default">
        <users>
          <user id="test">
            <params>
              <param name="password" value="test123"/>
              <param name="vm-password" value="test123"/>
            </params>
            <variables>
              <variable name="toll_allow" value="domestic,international,local"/>
              <variable name="accountcode" value="test"/>
              <variable name="user_context" value="default"/>
              <variable name="effective_caller_id_name" value="Test User"/>
              <variable name="effective_caller_id_number" value="1000"/>
            </variables>
          </user>
        </users>
      </group>
    </groups>
  </domain>
</include>